
[0;31mERROR[0m: MixedArgument - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Collections/Map/Map.php#L138\src/Modules/Collections/Map/[1;31mMap.php:138:88[0m]8;;\ - Argument 1 cannot be mixed, expecting K (see https://psalm.dev/030)
            static fn(self $accumulated, $key, $value) => $accumulated->append($mapper([97;41m$key[0m, $value)),


[0;31mERROR[0m: MixedArgument - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Collections/Map/Map.php#L138\src/Modules/Collections/Map/[1;31mMap.php:138:94[0m]8;;\ - Argument 2 cannot be mixed, expecting V (see https://psalm.dev/030)
            static fn(self $accumulated, $key, $value) => $accumulated->append($mapper($key, [97;41m$value[0m)),


[0;31mERROR[0m: MixedReturnTypeCoercion - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/Command.php#L183\src/Modules/Process/[1;31mCommand.php:183:16[0m]8;;\ - The declared return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Modules\Process\Output, Jsadaa\PhpCoreLibrary\Modules\Process\Output|string>' for Jsadaa\PhpCoreLibrary\Modules\Process\Command::runSingle is more specific than the inferred return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Modules\Process\Output, mixed>|Jsadaa\PhpCoreLibrary\Modules\Result\Result<mixed, Jsadaa\PhpCoreLibrary\Modules\Process\Output>|Jsadaa\PhpCoreLibrary\Modules\Result\Result<mixed, Jsadaa\PhpCoreLibrary\Modules\Time\Error\TimeOverflow|string>|Jsadaa\PhpCoreLibrary\Modules\Result\Result<mixed, string>' (see https://psalm.dev/197)
     * @return [97;41mResult<Output, Output|string>[0m


[0;31mERROR[0m: InvalidReturnStatement - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/Command.php#L190\src/Modules/Process/[1;31mCommand.php:190:20[0m]8;;\ - The inferred type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<mixed, string>' does not match the declared return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Modules\Process\Output, Jsadaa\PhpCoreLibrary\Modules\Process\Output|string>' for Jsadaa\PhpCoreLibrary\Modules\Process\Command::runSingle (see https://psalm.dev/128)
            return [97;41mResult::err($processResult->unwrapErr())[0m;


[0;31mERROR[0m: InvalidReturnStatement - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/Command.php#L198\src/Modules/Process/[1;31mCommand.php:198:20[0m]8;;\ - The inferred type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<mixed, Jsadaa\PhpCoreLibrary\Modules\Time\Error\TimeOverflow|string>' does not match the declared return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Modules\Process\Output, Jsadaa\PhpCoreLibrary\Modules\Process\Output|string>' for Jsadaa\PhpCoreLibrary\Modules\Process\Command::runSingle (see https://psalm.dev/128)
            return [97;41mResult::err($outputResult->unwrapErr())[0m;


[0;31mERROR[0m: MixedReturnTypeCoercion - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/Command.php#L203\src/Modules/Process/[1;31mCommand.php:203:16[0m]8;;\ - The type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Modules\Process\Output, mixed>|Jsadaa\PhpCoreLibrary\Modules\Result\Result<mixed, Jsadaa\PhpCoreLibrary\Modules\Process\Output>' is more general than the declared return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Modules\Process\Output, Jsadaa\PhpCoreLibrary\Modules\Process\Output|string>' for Jsadaa\PhpCoreLibrary\Modules\Process\Command::runSingle (see https://psalm.dev/197)
        return [97;41m$output->isSuccess()
            ? Result::ok($output)
            : Result::err($output)[0m;


[0;31mERROR[0m: MixedReturnTypeCoercion - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/Command.php#L209\src/Modules/Process/[1;31mCommand.php:209:16[0m]8;;\ - The declared return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Modules\Process\Output, Jsadaa\PhpCoreLibrary\Modules\Process\Output|string>' for Jsadaa\PhpCoreLibrary\Modules\Process\Command::runPipeline is more specific than the inferred return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Modules\Process\Output, mixed>|Jsadaa\PhpCoreLibrary\Modules\Result\Result<mixed, Jsadaa\PhpCoreLibrary\Modules\Process\Output>|Jsadaa\PhpCoreLibrary\Modules\Result\Result<mixed, Jsadaa\PhpCoreLibrary\Modules\Time\Error\TimeOverflow|string>|Jsadaa\PhpCoreLibrary\Modules\Result\Result<mixed, string>' (see https://psalm.dev/197)
     * @return [97;41mResult<Output, Output|string>[0m


[0;31mERROR[0m: MixedAssignment - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/Command.php#L220\src/Modules/Process/[1;31mCommand.php:220:39[0m]8;;\ - Unable to determine the type that $index is being assigned to (see https://psalm.dev/032)
        foreach ($builders->iter() as [97;41m$index[0m => $builder) {


[0;31mERROR[0m: MixedOperand - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/Command.php#L223\src/Modules/Process/[1;31mCommand.php:223:60[0m]8;;\ - Left operand cannot be mixed (see https://psalm.dev/059)
                $prevProcess = $processes->get(Integer::of([97;41m$index[0m - 1))->unwrap();


[0;31mERROR[0m: MixedArgument - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/Command.php#L223\src/Modules/Process/[1;31mCommand.php:223:60[0m]8;;\ - Argument 1 of Jsadaa\PhpCoreLibrary\Primitives\Integer\Integer::of cannot be mixed, expecting int (see https://psalm.dev/030)
                $prevProcess = $processes->get(Integer::of([97;41m$index - 1[0m))->unwrap();


[0;31mERROR[0m: InvalidReturnStatement - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/Command.php#L250\src/Modules/Process/[1;31mCommand.php:250:24[0m]8;;\ - The inferred type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<mixed, string>' does not match the declared return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Modules\Process\Output, Jsadaa\PhpCoreLibrary\Modules\Process\Output|string>' for Jsadaa\PhpCoreLibrary\Modules\Process\Command::runPipeline (see https://psalm.dev/128)
                return [97;41mResult::err($processResult->unwrapErr())[0m;


[0;31mERROR[0m: ImpureFunctionCall - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/Command.php#L263\src/Modules/Process/[1;31mCommand.php:263:13[0m]8;;\ - Cannot call an impure function from a mutation-free context (see https://psalm.dev/202)
            [97;41mfclose[0m($stdinResult->unwrap());


[0;31mERROR[0m: InvalidPassByReference - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/Command.php#L263\src/Modules/Process/[1;31mCommand.php:263:20[0m]8;;\ - Parameter 1 of fclose expects a variable (see https://psalm.dev/102)
            fclose([97;41m$stdinResult->unwrap()[0m);


[0;31mERROR[0m: InvalidReturnStatement - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/Command.php#L272\src/Modules/Process/[1;31mCommand.php:272:20[0m]8;;\ - The inferred type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<mixed, Jsadaa\PhpCoreLibrary\Modules\Time\Error\TimeOverflow|string>' does not match the declared return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Modules\Process\Output, Jsadaa\PhpCoreLibrary\Modules\Process\Output|string>' for Jsadaa\PhpCoreLibrary\Modules\Process\Command::runPipeline (see https://psalm.dev/128)
            return [97;41mResult::err($outputResult->unwrapErr())[0m;


[0;31mERROR[0m: MixedReturnTypeCoercion - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/Command.php#L277\src/Modules/Process/[1;31mCommand.php:277:16[0m]8;;\ - The type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Modules\Process\Output, mixed>|Jsadaa\PhpCoreLibrary\Modules\Result\Result<mixed, Jsadaa\PhpCoreLibrary\Modules\Process\Output>' is more general than the declared return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Modules\Process\Output, Jsadaa\PhpCoreLibrary\Modules\Process\Output|string>' for Jsadaa\PhpCoreLibrary\Modules\Process\Command::runPipeline (see https://psalm.dev/197)
        return [97;41m$output->isSuccess()
            ? Result::ok($output)
            : Result::err($output)[0m;


[0;31mERROR[0m: MixedReturnTypeCoercion - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/Command.php#L298\src/Modules/Process/[1;31mCommand.php:298:16[0m]8;;\ - The declared return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Modules\Process\Process, string>' for Jsadaa\PhpCoreLibrary\Modules\Process\Command::spawn is more specific than the inferred return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Modules\Process\Process, string>|Jsadaa\PhpCoreLibrary\Modules\Result\Result<mixed, 'Cannot spawn a pipeline command. Use run() instead.'>' (see https://psalm.dev/197)
     * @return [97;41mResult<Process, string>[0m


[0;31mERROR[0m: MixedReturnTypeCoercion - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/Command.php#L303\src/Modules/Process/[1;31mCommand.php:303:20[0m]8;;\ - The type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<mixed, 'Cannot spawn a pipeline command. Use run() instead.'>' is more general than the declared return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Modules\Process\Process, string>' for Jsadaa\PhpCoreLibrary\Modules\Process\Command::spawn (see https://psalm.dev/197)
            return [97;41mResult::err("Cannot spawn a pipeline command. Use run() instead.")[0m;


[0;31mERROR[0m: MixedReturnTypeCoercion - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/Command.php#L312\src/Modules/Process/[1;31mCommand.php:312:16[0m]8;;\ - The declared return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Primitives\Str\Str, string>' for Jsadaa\PhpCoreLibrary\Modules\Process\Command::output is more specific than the inferred return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Primitives\Str\Str, mixed>|Jsadaa\PhpCoreLibrary\Modules\Result\Result<mixed, string>' (see https://psalm.dev/197)
     * @return [97;41mResult<Str, string>[0m


[0;31mERROR[0m: MixedReturnTypeCoercion - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/Command.php#L320\src/Modules/Process/[1;31mCommand.php:320:20[0m]8;;\ - The type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<mixed, string>' is more general than the declared return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Primitives\Str\Str, string>' for Jsadaa\PhpCoreLibrary\Modules\Process\Command::output (see https://psalm.dev/197)
            return [97;41mResult::err(
                $error instanceof Output
                ? $error->stderr()->toString()
                : (string) $error
            )[0m;


[0;31mERROR[0m: RedundantCastGivenDocblockType - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/Command.php#L323\src/Modules/Process/[1;31mCommand.php:323:19[0m]8;;\ - Redundant cast to string given docblock-provided type (see https://psalm.dev/263)
                : [97;41m(string) $error[0m


[0;31mERROR[0m: MixedReturnTypeCoercion - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/Command.php#L327\src/Modules/Process/[1;31mCommand.php:327:16[0m]8;;\ - The type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Primitives\Str\Str, mixed>' is more general than the declared return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Primitives\Str\Str, string>' for Jsadaa\PhpCoreLibrary\Modules\Process\Command::output (see https://psalm.dev/197)
        return [97;41mResult::ok($result->unwrap()->stdout())[0m;


[0;31mERROR[0m: MixedReturnTypeCoercion - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/Process.php#L74\src/Modules/Process/[1;31mProcess.php:74:16[0m]8;;\ - The declared return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Primitives\Integer\Integer, string>' for Jsadaa\PhpCoreLibrary\Modules\Process\Process::pid is more specific than the inferred return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Primitives\Integer\Integer, mixed>|Jsadaa\PhpCoreLibrary\Modules\Result\Result<mixed, 'Process has no valid PID'>' (see https://psalm.dev/197)
     * @return [97;41mResult<Integer, string>[0m


[0;31mERROR[0m: MixedReturnTypeCoercion - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/Process.php#L80\src/Modules/Process/[1;31mProcess.php:80:16[0m]8;;\ - The type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Primitives\Integer\Integer, mixed>|Jsadaa\PhpCoreLibrary\Modules\Result\Result<mixed, 'Process has no valid PID'>' is more general than the declared return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Primitives\Integer\Integer, string>' for Jsadaa\PhpCoreLibrary\Modules\Process\Process::pid (see https://psalm.dev/197)
        return [97;41m$pid->gt(0)
            ? Result::ok($pid)
            : Result::err("Process has no valid PID")[0m;


[0;31mERROR[0m: MixedReturnTypeCoercion - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/Process.php#L88\src/Modules/Process/[1;31mProcess.php:88:16[0m]8;;\ - The declared return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Modules\Process\Status, Jsadaa\PhpCoreLibrary\Modules\Time\Error\TimeOverflow|string>' for Jsadaa\PhpCoreLibrary\Modules\Process\Process::wait is more specific than the inferred return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Modules\Process\Status, mixed>|Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Modules\Time\SystemTime, Jsadaa\PhpCoreLibrary\Modules\Time\Error\TimeOverflow>|Jsadaa\PhpCoreLibrary\Modules\Result\Result<mixed, 'Process wait timed out'>' (see https://psalm.dev/197)
     * @return [97;41mResult<Status, string|TimeOverflow>[0m


[0;31mERROR[0m: InvalidReturnStatement - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/Process.php#L97\src/Modules/Process/[1;31mProcess.php:97:20[0m]8;;\ - The inferred type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Modules\Time\SystemTime, Jsadaa\PhpCoreLibrary\Modules\Time\Error\TimeOverflow>' does not match the declared return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Modules\Process\Status, Jsadaa\PhpCoreLibrary\Modules\Time\Error\TimeOverflow|string>' for Jsadaa\PhpCoreLibrary\Modules\Process\Process::wait (see https://psalm.dev/128)
            return [97;41m$deadline[0m;


[0;31mERROR[0m: MixedReturnTypeCoercion - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/Process.php#L104\src/Modules/Process/[1;31mProcess.php:104:28[0m]8;;\ - The type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<mixed, 'Process wait timed out'>' is more general than the declared return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Modules\Process\Status, Jsadaa\PhpCoreLibrary\Modules\Time\Error\TimeOverflow|string>' for Jsadaa\PhpCoreLibrary\Modules\Process\Process::wait (see https://psalm.dev/197)
                    return [97;41mResult::err("Process wait timed out")[0m;


[0;31mERROR[0m: ImpureFunctionCall - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/Process.php#L108\src/Modules/Process/[1;31mProcess.php:108:13[0m]8;;\ - Cannot call an impure function from a mutation-free context (see https://psalm.dev/202)
            [97;41musleep[0m(10000); // 10ms


[0;31mERROR[0m: MixedReturnTypeCoercion - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/Process.php#L111\src/Modules/Process/[1;31mProcess.php:111:16[0m]8;;\ - The type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Modules\Process\Status, mixed>' is more general than the declared return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Modules\Process\Status, Jsadaa\PhpCoreLibrary\Modules\Time\Error\TimeOverflow|string>' for Jsadaa\PhpCoreLibrary\Modules\Process\Process::wait (see https://psalm.dev/197)
        return [97;41mResult::ok($this->status())[0m;


[0;31mERROR[0m: MixedReturnTypeCoercion - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/Process.php#L117\src/Modules/Process/[1;31mProcess.php:117:16[0m]8;;\ - The declared return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Primitives\Unit, string>' for Jsadaa\PhpCoreLibrary\Modules\Process\Process::kill is more specific than the inferred return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Primitives\Unit, mixed>|Jsadaa\PhpCoreLibrary\Modules\Result\Result<mixed, 'Failed to send signal to process'>' (see https://psalm.dev/197)
     * @return [97;41mResult<Unit, string>[0m


[0;31mERROR[0m: MixedReturnTypeCoercion - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/Process.php#L122\src/Modules/Process/[1;31mProcess.php:122:20[0m]8;;\ - The type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Primitives\Unit, mixed>' is more general than the declared return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Primitives\Unit, string>' for Jsadaa\PhpCoreLibrary\Modules\Process\Process::kill (see https://psalm.dev/197)
            return [97;41mResult::ok(Unit::new())[0m;


[0;31mERROR[0m: ImpureFunctionCall - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/Process.php#L125\src/Modules/Process/[1;31mProcess.php:125:19[0m]8;;\ - Cannot call an impure function from a mutation-free context (see https://psalm.dev/202)
        $result = [97;41mproc_terminate[0m($this->handle, $signal);


[0;31mERROR[0m: MixedReturnTypeCoercion - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/Process.php#L127\src/Modules/Process/[1;31mProcess.php:127:16[0m]8;;\ - The type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Primitives\Unit, mixed>|Jsadaa\PhpCoreLibrary\Modules\Result\Result<mixed, 'Failed to send signal to process'>' is more general than the declared return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Primitives\Unit, string>' for Jsadaa\PhpCoreLibrary\Modules\Process\Process::kill (see https://psalm.dev/197)
        return [97;41m$result
            ? Result::ok(Unit::new())
            : Result::err("Failed to send signal to process")[0m;


[0;31mERROR[0m: MixedReturnTypeCoercion - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/Process.php#L159\src/Modules/Process/[1;31mProcess.php:159:16[0m]8;;\ - The declared return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Modules\Process\StreamWriter, string>' for Jsadaa\PhpCoreLibrary\Modules\Process\Process::stdinWriter is more specific than the inferred return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Modules\Process\StreamWriter, mixed>|Jsadaa\PhpCoreLibrary\Modules\Result\Result<mixed, 'Failed to get stdin'>' (see https://psalm.dev/197)
     * @return [97;41mResult<StreamWriter, string>[0m


[0;31mERROR[0m: MixedReturnTypeCoercion - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/Process.php#L165\src/Modules/Process/[1;31mProcess.php:165:16[0m]8;;\ - The type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Modules\Process\StreamWriter, mixed>|Jsadaa\PhpCoreLibrary\Modules\Result\Result<mixed, 'Failed to get stdin'>' is more general than the declared return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Modules\Process\StreamWriter, string>' for Jsadaa\PhpCoreLibrary\Modules\Process\Process::stdinWriter (see https://psalm.dev/197)
        return [97;41m$stdin->isSome()
            ? Result::ok(StreamWriter::withAutoFlush($stdin->unwrap()))
            : Result::err("Failed to get stdin")[0m;


[0;31mERROR[0m: MixedReturnTypeCoercion - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/Process.php#L173\src/Modules/Process/[1;31mProcess.php:173:16[0m]8;;\ - The declared return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Primitives\Integer\Integer, string>' for Jsadaa\PhpCoreLibrary\Modules\Process\Process::writeStdin is more specific than the inferred return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Primitives\Integer\Integer, string>|Jsadaa\PhpCoreLibrary\Modules\Result\Result<mixed, string>' (see https://psalm.dev/197)
     * @return [97;41mResult<Integer, string>[0m


[0;31mERROR[0m: MixedReturnTypeCoercion - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/Process.php#L179\src/Modules/Process/[1;31mProcess.php:179:16[0m]8;;\ - The type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Primitives\Integer\Integer, string>|Jsadaa\PhpCoreLibrary\Modules\Result\Result<mixed, string>' is more general than the declared return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Primitives\Integer\Integer, string>' for Jsadaa\PhpCoreLibrary\Modules\Process\Process::writeStdin (see https://psalm.dev/197)
        return [97;41m$writer->isOk()
            ? $writer->unwrap()->write($data)
            : Result::err($writer->unwrapErr())[0m;


[0;31mERROR[0m: MixedReturnTypeCoercion - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/Process.php#L187\src/Modules/Process/[1;31mProcess.php:187:16[0m]8;;\ - The declared return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Primitives\Str\Str, string>' for Jsadaa\PhpCoreLibrary\Modules\Process\Process::readStdout is more specific than the inferred return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Primitives\Str\Str, mixed>|Jsadaa\PhpCoreLibrary\Modules\Result\Result<mixed, 'Failed to get stdout'|'Failed to read from stdout'>' (see https://psalm.dev/197)
     * @return [97;41mResult<Str, string>[0m


[0;31mERROR[0m: MixedReturnTypeCoercion - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/Process.php#L194\src/Modules/Process/[1;31mProcess.php:194:20[0m]8;;\ - The type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<mixed, 'Failed to get stdout'>' is more general than the declared return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Primitives\Str\Str, string>' for Jsadaa\PhpCoreLibrary\Modules\Process\Process::readStdout (see https://psalm.dev/197)
            return [97;41mResult::err("Failed to get stdout")[0m;


[0;31mERROR[0m: ImpureFunctionCall - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/Process.php#L197\src/Modules/Process/[1;31mProcess.php:197:9[0m]8;;\ - Cannot call an impure function from a mutation-free context (see https://psalm.dev/202)
        [97;41mstream_set_blocking[0m($stdout->unwrap(), false);


[0;31mERROR[0m: MixedReturnTypeCoercion - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/Process.php#L200\src/Modules/Process/[1;31mProcess.php:200:16[0m]8;;\ - The type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Primitives\Str\Str, mixed>|Jsadaa\PhpCoreLibrary\Modules\Result\Result<mixed, 'Failed to read from stdout'>' is more general than the declared return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Primitives\Str\Str, string>' for Jsadaa\PhpCoreLibrary\Modules\Process\Process::readStdout (see https://psalm.dev/197)
        return [97;41m$data !== false
            ? Result::ok(Str::of($data))
            : Result::err("Failed to read from stdout")[0m;


[0;31mERROR[0m: MixedReturnTypeCoercion - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/Process.php#L208\src/Modules/Process/[1;31mProcess.php:208:16[0m]8;;\ - The declared return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Primitives\Str\Str, string>' for Jsadaa\PhpCoreLibrary\Modules\Process\Process::readStderr is more specific than the inferred return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Primitives\Str\Str, mixed>|Jsadaa\PhpCoreLibrary\Modules\Result\Result<mixed, 'Failed to get stderr'|'Failed to read from stderr'>' (see https://psalm.dev/197)
     * @return [97;41mResult<Str, string>[0m


[0;31mERROR[0m: MixedReturnTypeCoercion - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/Process.php#L215\src/Modules/Process/[1;31mProcess.php:215:20[0m]8;;\ - The type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<mixed, 'Failed to get stderr'>' is more general than the declared return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Primitives\Str\Str, string>' for Jsadaa\PhpCoreLibrary\Modules\Process\Process::readStderr (see https://psalm.dev/197)
            return [97;41mResult::err("Failed to get stderr")[0m;


[0;31mERROR[0m: ImpureFunctionCall - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/Process.php#L218\src/Modules/Process/[1;31mProcess.php:218:9[0m]8;;\ - Cannot call an impure function from a mutation-free context (see https://psalm.dev/202)
        [97;41mstream_set_blocking[0m($stderr->unwrap(), false);


[0;31mERROR[0m: MixedReturnTypeCoercion - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/Process.php#L221\src/Modules/Process/[1;31mProcess.php:221:16[0m]8;;\ - The type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Primitives\Str\Str, mixed>|Jsadaa\PhpCoreLibrary\Modules\Result\Result<mixed, 'Failed to read from stderr'>' is more general than the declared return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Primitives\Str\Str, string>' for Jsadaa\PhpCoreLibrary\Modules\Process\Process::readStderr (see https://psalm.dev/197)
        return [97;41m$data !== false
            ? Result::ok(Str::of($data))
            : Result::err("Failed to read from stderr")[0m;


[0;31mERROR[0m: MixedReturnTypeCoercion - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/Process.php#L229\src/Modules/Process/[1;31mProcess.php:229:16[0m]8;;\ - The declared return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Modules\Process\Output, Jsadaa\PhpCoreLibrary\Modules\Time\Error\TimeOverflow|string>' for Jsadaa\PhpCoreLibrary\Modules\Process\Process::output is more specific than the inferred return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Modules\Process\Output, mixed>|Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Modules\Time\SystemTime, Jsadaa\PhpCoreLibrary\Modules\Time\Error\TimeOverflow>|Jsadaa\PhpCoreLibrary\Modules\Result\Result<mixed, 'Failed to read from stderr'|'Failed to read from stdout'|'Process execution timed out'>' (see https://psalm.dev/197)
     * @return [97;41mResult<Output, string|TimeOverflow>[0m


[0;31mERROR[0m: ImpureFunctionCall - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/Process.php#L236\src/Modules/Process/[1;31mProcess.php:236:13[0m]8;;\ - Cannot call an impure function from a mutation-free context (see https://psalm.dev/202)
            [97;41mfclose[0m($stdinResult->unwrap());


[0;31mERROR[0m: InvalidPassByReference - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/Process.php#L236\src/Modules/Process/[1;31mProcess.php:236:20[0m]8;;\ - Parameter 1 of fclose expects a variable (see https://psalm.dev/102)
            fclose([97;41m$stdinResult->unwrap()[0m);


[0;31mERROR[0m: MixedReturnTypeCoercion - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/Process.php#L244\src/Modules/Process/[1;31mProcess.php:244:20[0m]8;;\ - The type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<mixed, 'Failed to read from stdout'>' is more general than the declared return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Modules\Process\Output, Jsadaa\PhpCoreLibrary\Modules\Time\Error\TimeOverflow|string>' for Jsadaa\PhpCoreLibrary\Modules\Process\Process::output (see https://psalm.dev/197)
            return [97;41mResult::err("Failed to read from stdout")[0m;


[0;31mERROR[0m: MixedReturnTypeCoercion - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/Process.php#L248\src/Modules/Process/[1;31mProcess.php:248:20[0m]8;;\ - The type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<mixed, 'Failed to read from stderr'>' is more general than the declared return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Modules\Process\Output, Jsadaa\PhpCoreLibrary\Modules\Time\Error\TimeOverflow|string>' for Jsadaa\PhpCoreLibrary\Modules\Process\Process::output (see https://psalm.dev/197)
            return [97;41mResult::err("Failed to read from stderr")[0m;


[0;31mERROR[0m: InvalidReturnStatement - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/Process.php#L257\src/Modules/Process/[1;31mProcess.php:257:20[0m]8;;\ - The inferred type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Modules\Time\SystemTime, Jsadaa\PhpCoreLibrary\Modules\Time\Error\TimeOverflow>' does not match the declared return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Modules\Process\Output, Jsadaa\PhpCoreLibrary\Modules\Time\Error\TimeOverflow|string>' for Jsadaa\PhpCoreLibrary\Modules\Process\Process::output (see https://psalm.dev/128)
            return [97;41m$deadline[0m;


[0;31mERROR[0m: MixedReturnTypeCoercion - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/Process.php#L266\src/Modules/Process/[1;31mProcess.php:266:24[0m]8;;\ - The type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<mixed, 'Process execution timed out'>' is more general than the declared return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Modules\Process\Output, Jsadaa\PhpCoreLibrary\Modules\Time\Error\TimeOverflow|string>' for Jsadaa\PhpCoreLibrary\Modules\Process\Process::output (see https://psalm.dev/197)
                return [97;41mResult::err("Process execution timed out")[0m;


[0;31mERROR[0m: ImpureFunctionCall - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/Process.php#L295\src/Modules/Process/[1;31mProcess.php:295:13[0m]8;;\ - Cannot call an impure function from a mutation-free context (see https://psalm.dev/202)
            [97;41musleep[0m(10000); // 10ms


[0;31mERROR[0m: MixedReturnTypeCoercion - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/Process.php#L301\src/Modules/Process/[1;31mProcess.php:301:16[0m]8;;\ - The type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Modules\Process\Output, mixed>' is more general than the declared return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Modules\Process\Output, Jsadaa\PhpCoreLibrary\Modules\Time\Error\TimeOverflow|string>' for Jsadaa\PhpCoreLibrary\Modules\Process\Process::output (see https://psalm.dev/197)
        return [97;41mResult::ok(Output::of($stdout, $stderr, $this->status()))[0m;


[0;31mERROR[0m: RedundantConditionGivenDocblockType - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/Process.php#L311\src/Modules/Process/[1;31mProcess.php:311:21[0m]8;;\ - Docblock-defined type resource for $resource is always resource (see https://psalm.dev/156)
                if ([97;41mis_resource($resource)[0m) {


[0;31mERROR[0m: RedundantConditionGivenDocblockType - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/Process.php#L317\src/Modules/Process/[1;31mProcess.php:317:13[0m]8;;\ - Docblock-defined type resource for $this->handle is always resource (see https://psalm.dev/156)
        if ([97;41mis_resource($this->handle)[0m) {


[0;31mERROR[0m: ImpureFunctionCall - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/Process.php#L318\src/Modules/Process/[1;31mProcess.php:318:13[0m]8;;\ - Cannot call an impure function from a mutation-free context (see https://psalm.dev/202)
            [97;41mproc_close[0m($this->handle);


[0;31mERROR[0m: MixedReturnTypeCoercion - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/ProcessBuilder.php#L167\src/Modules/Process/[1;31mProcessBuilder.php:167:16[0m]8;;\ - The declared return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Modules\Process\Process, string>' for Jsadaa\PhpCoreLibrary\Modules\Process\ProcessBuilder::spawn is more specific than the inferred return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Modules\Process\Process, mixed>|Jsadaa\PhpCoreLibrary\Modules\Result\Result<mixed, non-empty-string>' (see https://psalm.dev/197)
     * @return [97;41mResult<Process, string>[0m


[0;31mERROR[0m: MixedReturnTypeCoercion - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/ProcessBuilder.php#L172\src/Modules/Process/[1;31mProcessBuilder.php:172:20[0m]8;;\ - The type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<mixed, 'Command cannot be empty'>' is more general than the declared return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Modules\Process\Process, string>' for Jsadaa\PhpCoreLibrary\Modules\Process\ProcessBuilder::spawn (see https://psalm.dev/197)
            return [97;41mResult::err("Command cannot be empty")[0m;


[0;31mERROR[0m: InvalidReturnStatement - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/ProcessBuilder.php#L176\src/Modules/Process/[1;31mProcessBuilder.php:176:20[0m]8;;\ - The inferred type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<mixed, non-empty-string>' does not match the declared return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Modules\Process\Process, string>' for Jsadaa\PhpCoreLibrary\Modules\Process\ProcessBuilder::spawn (see https://psalm.dev/128)
            return [97;41mResult::err("Working directory does not exist: {$this->workingDirectory->toString()}")[0m;


[0;31mERROR[0m: ImpureFunctionCall - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/ProcessBuilder.php#L183\src/Modules/Process/[1;31mProcessBuilder.php:183:19[0m]8;;\ - Cannot call an impure function from a mutation-free context (see https://psalm.dev/202)
        $handle = [97;41mproc_open[0m(


[0;31mERROR[0m: MixedReturnTypeCoercion - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/ProcessBuilder.php#L193\src/Modules/Process/[1;31mProcessBuilder.php:193:20[0m]8;;\ - The type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<mixed, 'Failed to spawn process'>' is more general than the declared return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Modules\Process\Process, string>' for Jsadaa\PhpCoreLibrary\Modules\Process\ProcessBuilder::spawn (see https://psalm.dev/197)
            return [97;41mResult::err("Failed to spawn process")[0m;


[0;31mERROR[0m: MixedReturnTypeCoercion - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/ProcessBuilder.php#L196\src/Modules/Process/[1;31mProcessBuilder.php:196:16[0m]8;;\ - The type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Modules\Process\Process, mixed>' is more general than the declared return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Modules\Process\Process, string>' for Jsadaa\PhpCoreLibrary\Modules\Process\ProcessBuilder::spawn (see https://psalm.dev/197)
        return [97;41mResult::ok(Process::fromHandle($handle, $pipes))[0m;


[0;31mERROR[0m: ImpureMethodCall - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/ProcessBuilder.php#L196\src/Modules/Process/[1;31mProcessBuilder.php:196:36[0m]8;;\ - Cannot call a possibly-mutating method from a mutation-free context (see https://psalm.dev/203)
        return Result::ok(Process::[97;41mfromHandle[0m($handle, $pipes));


[0;31mERROR[0m: MixedArgumentTypeCoercion - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/ProcessBuilder.php#L196\src/Modules/Process/[1;31mProcessBuilder.php:196:56[0m]8;;\ - Argument 2 of Jsadaa\PhpCoreLibrary\Modules\Process\Process::fromHandle expects array<int, resource>, but parent type array<array-key, resource> provided (see https://psalm.dev/194)
        return Result::ok(Process::fromHandle($handle, [97;41m$pipes[0m));


[0;31mERROR[0m: MixedReturnTypeCoercion - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/ProcessStreams.php#L109\src/Modules/Process/[1;31mProcessStreams.php:109:16[0m]8;;\ - The declared return type 'array<int, array<array-key, mixed>|resource>' for Jsadaa\PhpCoreLibrary\Modules\Process\ProcessStreams::toDescriptorArray is more specific than the inferred return type 'array<array-key, list{0: string, 1: string, 2?: string}|mixed|resource>' (see https://psalm.dev/197)
     * @return [97;41marray<int, array|resource>[0m


[0;31mERROR[0m: MixedReturnTypeCoercion - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/ProcessStreams.php#L113\src/Modules/Process/[1;31mProcessStreams.php:113:16[0m]8;;\ - The type 'array<array-key, list{0: string, 1: string, 2?: string}|mixed|resource>' is more general than the declared return type 'array<int, array<array-key, mixed>|resource>' for Jsadaa\PhpCoreLibrary\Modules\Process\ProcessStreams::toDescriptorArray (see https://psalm.dev/197)
        return [97;41m$this
            ->descriptors
            ->fold(
                function (array $carry, FileDescriptor $fd, StreamDescriptor $descriptor) {
                    $carry[$fd->toInt()] = $descriptor->toDescriptor();
                    return $carry;
                },
                []
            )[0m;


[0;31mERROR[0m: InvalidNullableReturnType - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/StreamDescriptor.php#L119\src/Modules/Process/[1;31mStreamDescriptor.php:119:16[0m]8;;\ - The declared return type 'list{0: string, 1: string, 2?: string}|resource' for Jsadaa\PhpCoreLibrary\Modules\Process\StreamDescriptor::toDescriptor is not nullable, but 'list{0: string, 1: string, 2?: string}|null|resource' contains null (see https://psalm.dev/144)
     * @return [97;41marray{string, string}|array{string, string, string}|resource[0m


[0;31mERROR[0m: NullableReturnStatement - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/StreamDescriptor.php#L123\src/Modules/Process/[1;31mStreamDescriptor.php:123:16[0m]8;;\ - The declared return type 'list{0: string, 1: string, 2?: string}|resource' for Jsadaa\PhpCoreLibrary\Modules\Process\StreamDescriptor::toDescriptor is not nullable, but the function returns 'list{0: 'file'|'pipe', 1: string, 2?: string}|null|resource' (see https://psalm.dev/139)
        return [97;41mmatch ($this->type) {
            StreamType::PIPE => ['pipe', $this->mode->isSome() ? $this->mode->unwrap()->toString() : 'r'],
            StreamType::FILE => [
                'file',
                $this->path->isSome()
                ? $this->path->unwrap()->toString()
                : '',
                $this->mode->isSome()
                ? $this->mode->unwrap()->toString()
                : 'r',
            ],
            StreamType::RESOURCE => $this->resource,
            StreamType::INHERIT => match (PHP_OS_FAMILY) {
                    'Windows' => ['pipe', 'r'],
                    default => STDIN,  // Will be overridden for stdout/stderr
                },
            StreamType::NULL => match (PHP_OS_FAMILY) {
                    'Windows' => ['file', 'NUL', 'r'],
                    default => ['file', '/dev/null', 'r'],
                },
        }[0m;


[0;31mERROR[0m: MixedReturnTypeCoercion - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/StreamReader.php#L48\src/Modules/Process/[1;31mStreamReader.php:48:16[0m]8;;\ - The declared return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Primitives\Str\Str, string>' for Jsadaa\PhpCoreLibrary\Modules\Process\StreamReader::readAvailable is more specific than the inferred return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Primitives\Str\Str, mixed>|Jsadaa\PhpCoreLibrary\Modules\Result\Result<mixed, 'Failed to read from stream'>' (see https://psalm.dev/197)
     * @return [97;41mResult<Str, string>[0m


[0;31mERROR[0m: ImpureFunctionCall - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/StreamReader.php#L52\src/Modules/Process/[1;31mStreamReader.php:52:9[0m]8;;\ - Cannot call an impure function from a mutation-free context (see https://psalm.dev/202)
        [97;41mstream_set_blocking[0m($this->stream, false);


[0;31mERROR[0m: ImpureFunctionCall - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/StreamReader.php#L54\src/Modules/Process/[1;31mStreamReader.php:54:17[0m]8;;\ - Cannot call an impure function from a mutation-free context (see https://psalm.dev/202)
        $data = [97;41mfread[0m($this->stream, $this->bufferSize->toInt());


[0;31mERROR[0m: MixedReturnTypeCoercion - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/StreamReader.php#L57\src/Modules/Process/[1;31mStreamReader.php:57:20[0m]8;;\ - The type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<mixed, 'Failed to read from stream'>' is more general than the declared return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Primitives\Str\Str, string>' for Jsadaa\PhpCoreLibrary\Modules\Process\StreamReader::readAvailable (see https://psalm.dev/197)
            return [97;41mResult::err("Failed to read from stream")[0m;


[0;31mERROR[0m: MixedReturnTypeCoercion - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/StreamReader.php#L60\src/Modules/Process/[1;31mStreamReader.php:60:16[0m]8;;\ - The type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Primitives\Str\Str, mixed>' is more general than the declared return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Primitives\Str\Str, string>' for Jsadaa\PhpCoreLibrary\Modules\Process\StreamReader::readAvailable (see https://psalm.dev/197)
        return [97;41mResult::ok(Str::of($data))[0m;


[0;31mERROR[0m: MixedReturnTypeCoercion - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/StreamReader.php#L66\src/Modules/Process/[1;31mStreamReader.php:66:16[0m]8;;\ - The declared return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Primitives\Str\Str, string>' for Jsadaa\PhpCoreLibrary\Modules\Process\StreamReader::readAll is more specific than the inferred return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Primitives\Str\Str, mixed>|Jsadaa\PhpCoreLibrary\Modules\Result\Result<mixed, 'Failed to read from stream'|'Read timeout exceeded'>' (see https://psalm.dev/197)
     * @return [97;41mResult<Str, string>[0m


[0;31mERROR[0m: ImpureFunctionCall - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/StreamReader.php#L73\src/Modules/Process/[1;31mStreamReader.php:73:9[0m]8;;\ - Cannot call an impure function from a mutation-free context (see https://psalm.dev/202)
        [97;41mstream_set_blocking[0m($this->stream, false);


[0;31mERROR[0m: InvalidArgument - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/StreamReader.php#L76\src/Modules/Process/[1;31mStreamReader.php:76:39[0m]8;;\ - Argument 1 of Jsadaa\PhpCoreLibrary\Modules\Time\SystemTime::ge expects Jsadaa\PhpCoreLibrary\Modules\Time\SystemTime, but Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Modules\Time\SystemTime, Jsadaa\PhpCoreLibrary\Modules\Time\Error\TimeOverflow> provided (see https://psalm.dev/004)
            if (SystemTime::now()->ge([97;41m$deadline[0m)) {


[0;31mERROR[0m: MixedReturnTypeCoercion - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/StreamReader.php#L77\src/Modules/Process/[1;31mStreamReader.php:77:24[0m]8;;\ - The type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<mixed, 'Read timeout exceeded'>' is more general than the declared return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Primitives\Str\Str, string>' for Jsadaa\PhpCoreLibrary\Modules\Process\StreamReader::readAll (see https://psalm.dev/197)
                return [97;41mResult::err("Read timeout exceeded")[0m;


[0;31mERROR[0m: ImpureFunctionCall - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/StreamReader.php#L84\src/Modules/Process/[1;31mStreamReader.php:84:21[0m]8;;\ - Cannot call an impure function from a mutation-free context (see https://psalm.dev/202)
            $data = [97;41mfread[0m($this->stream, $this->bufferSize->toInt());


[0;31mERROR[0m: MixedReturnTypeCoercion - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/StreamReader.php#L87\src/Modules/Process/[1;31mStreamReader.php:87:24[0m]8;;\ - The type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<mixed, 'Failed to read from stream'>' is more general than the declared return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Primitives\Str\Str, string>' for Jsadaa\PhpCoreLibrary\Modules\Process\StreamReader::readAll (see https://psalm.dev/197)
                return [97;41mResult::err("Failed to read from stream")[0m;


[0;31mERROR[0m: ImpureFunctionCall - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/StreamReader.php#L94\src/Modules/Process/[1;31mStreamReader.php:94:17[0m]8;;\ - Cannot call an impure function from a mutation-free context (see https://psalm.dev/202)
                [97;41musleep[0m(1000); // 1ms


[0;31mERROR[0m: MixedReturnTypeCoercion - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/StreamReader.php#L98\src/Modules/Process/[1;31mStreamReader.php:98:16[0m]8;;\ - The type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Primitives\Str\Str, mixed>' is more general than the declared return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Primitives\Str\Str, string>' for Jsadaa\PhpCoreLibrary\Modules\Process\StreamReader::readAll (see https://psalm.dev/197)
        return [97;41mResult::ok($result)[0m;


[0;31mERROR[0m: MixedReturnTypeCoercion - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/StreamReader.php#L104\src/Modules/Process/[1;31mStreamReader.php:104:16[0m]8;;\ - The declared return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Primitives\Str\Str, string>' for Jsadaa\PhpCoreLibrary\Modules\Process\StreamReader::readUntil is more specific than the inferred return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Primitives\Str\Str, mixed>|Jsadaa\PhpCoreLibrary\Modules\Result\Result<mixed, 'Read timeout exceeded'>' (see https://psalm.dev/197)
     * @return [97;41mResult<Str, string>[0m


[0;31mERROR[0m: ImpureFunctionCall - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/StreamReader.php#L112\src/Modules/Process/[1;31mStreamReader.php:112:9[0m]8;;\ - Cannot call an impure function from a mutation-free context (see https://psalm.dev/202)
        [97;41mstream_set_blocking[0m($this->stream, false);


[0;31mERROR[0m: InvalidArgument - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/StreamReader.php#L115\src/Modules/Process/[1;31mStreamReader.php:115:39[0m]8;;\ - Argument 1 of Jsadaa\PhpCoreLibrary\Modules\Time\SystemTime::ge expects Jsadaa\PhpCoreLibrary\Modules\Time\SystemTime, but Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Modules\Time\SystemTime, Jsadaa\PhpCoreLibrary\Modules\Time\Error\TimeOverflow> provided (see https://psalm.dev/004)
            if (SystemTime::now()->ge([97;41m$deadline[0m)) {


[0;31mERROR[0m: MixedReturnTypeCoercion - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/StreamReader.php#L116\src/Modules/Process/[1;31mStreamReader.php:116:24[0m]8;;\ - The type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<mixed, 'Read timeout exceeded'>' is more general than the declared return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Primitives\Str\Str, string>' for Jsadaa\PhpCoreLibrary\Modules\Process\StreamReader::readUntil (see https://psalm.dev/197)
                return [97;41mResult::err("Read timeout exceeded")[0m;


[0;31mERROR[0m: ImpureFunctionCall - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/StreamReader.php#L125\src/Modules/Process/[1;31mStreamReader.php:125:17[0m]8;;\ - Cannot call an impure function from a mutation-free context (see https://psalm.dev/202)
                [97;41musleep[0m(1000); // 1ms


[0;31mERROR[0m: MixedReturnTypeCoercion - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/StreamReader.php#L136\src/Modules/Process/[1;31mStreamReader.php:136:16[0m]8;;\ - The type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Primitives\Str\Str, mixed>' is more general than the declared return type 'Jsadaa\PhpCoreLibrary\Modules\Result\Result<Jsadaa\PhpCoreLibrary\Primitives\Str\Str, string>' for Jsadaa\PhpCoreLibrary\Modules\Process\StreamReader::readUntil (see https://psalm.dev/197)
        return [97;41mResult::ok($result)[0m;


[0;31mERROR[0m: RedundantConditionGivenDocblockType - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/StreamReader.php#L152\src/Modules/Process/[1;31mStreamReader.php:152:13[0m]8;;\ - Docblock-defined type resource for $this->stream is always resource (see https://psalm.dev/156)
        if ([97;41mis_resource($this->stream)[0m) {


[0;31mERROR[0m: ImpureFunctionCall - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/StreamReader.php#L153\src/Modules/Process/[1;31mStreamReader.php:153:13[0m]8;;\ - Cannot call an impure function from a mutation-free context (see https://psalm.dev/202)
            [97;41mfclose[0m($this->stream);


[0;31mERROR[0m: InaccessibleProperty - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/StreamReader.php#L153\src/Modules/Process/[1;31mStreamReader.php:153:20[0m]8;;\ - Jsadaa\PhpCoreLibrary\Modules\Process\StreamReader::$stream is marked readonly (see https://psalm.dev/054)
            fclose([97;41m$this->stream[0m);


[0;31mERROR[0m: InvalidPropertyAssignmentValue - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/StreamReader.php#L153\src/Modules/Process/[1;31mStreamReader.php:153:20[0m]8;;\ - $this->stream with declared type 'resource' cannot be assigned type 'closed-resource' (see https://psalm.dev/145)
            fclose([97;41m$this->stream[0m);


[0;31mERROR[0m: DuplicateMethod - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/StreamWriter.php#L90\src/Modules/Process/[1;31mStreamWriter.php:90:5[0m]8;;\ - Method Jsadaa\PhpCoreLibrary\Modules\Process\StreamWriter::withautoflush has already been defined in /Users/jsadaa/Github/personal/php-core-library/src/Modules/Process/StreamWriter.php (see https://psalm.dev/178)
    [97;41mpublic function withAutoFlush(bool $enabled = true): self[0m


[0;31mERROR[0m: InvalidReturnType - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Primitives/Str/Str.php#L308\src/Primitives/Str/[1;31mStr.php:308:16[0m]8;;\ - The declared return type 'Jsadaa\PhpCoreLibrary\Modules\Collections\Sequence\Sequence<Jsadaa\PhpCoreLibrary\Primitives\Char\Char>' for Jsadaa\PhpCoreLibrary\Primitives\Str\Str::chars is incorrect, got 'Jsadaa\PhpCoreLibrary\Modules\Collections\Sequence\Sequence<Jsadaa\PhpCoreLibrary\Primitives\Char\Char>|Jsadaa\PhpCoreLibrary\Modules\Collections\Sequence\Sequence<Jsadaa\PhpCoreLibrary\Primitives\Str\Str>' (see https://psalm.dev/011)
     * @return [97;41mSequence<Char>[0m A Sequence containing the individual characters of the string


[0;31mERROR[0m: InvalidReturnStatement - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Primitives/Str/Str.php#L314\src/Primitives/Str/[1;31mStr.php:314:20[0m]8;;\ - The inferred type 'Jsadaa\PhpCoreLibrary\Modules\Collections\Sequence\Sequence<Jsadaa\PhpCoreLibrary\Primitives\Str\Str>' does not match the declared return type 'Jsadaa\PhpCoreLibrary\Modules\Collections\Sequence\Sequence<Jsadaa\PhpCoreLibrary\Primitives\Char\Char>' for Jsadaa\PhpCoreLibrary\Primitives\Str\Str::chars (see https://psalm.dev/128)
            return [97;41mSequence::new()[0m;


[0;31mERROR[0m: ImpureFunctionCall - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Primitives/Str/Str.php#L1078\src/Primitives/Str/[1;31mStr.php:1078:25[0m]8;;\ - Cannot call an impure function from a mutation-free context (see https://psalm.dev/202)
        return self::of([97;41m$mapper($this->value)[0m);


[0;31mERROR[0m: ImpureMethodCall - ]8;;file:///Users/jsadaa/Github/personal/php-core-library/src/Primitives/Str/Str.php#L1224\src/Primitives/Str/[1;31mStr.php:1224:19[0m]8;;\ - Cannot call a possibly-mutating method from a mutation-free context (see https://psalm.dev/203)
            Char::[97;41mof[0m(\mb_substr($this->value, $index->toInt(), 1, self::UTF8)),


------------------------------
[0;31m96 errors[0m found
------------------------------
Psalm can automatically fix 2 of these issues.
Run Psalm again with 
[30;48;5;195m--alter --issues=InvalidNullableReturnType,InvalidReturnType --dry-run[0m
to see what it can fix.
------------------------------

Checks took 0.61 seconds and used 84.388MB of memory
Psalm was able to infer types for 99.8815% of the codebase
